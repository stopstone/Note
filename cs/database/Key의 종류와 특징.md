# Key의 종류와 특징

> 데이터베이스에서 데이터를 효율적으로 관리하고 검색하기 위해 사용하는 Key들에 대해 알아보겠습니다.

## Key란?

**Key**는 데이터베이스에서 **검색, 정렬 시 Tuple을 구분할 수 있는 기준이 되는 Attribute**입니다.

쉽게 말해, 수많은 데이터 중에서 특정 데이터를 찾거나 구별하기 위한 식별자 역할을 합니다.

---

## 1. Candidate Key (후보키)

### 정의
**Tuple을 유일하게 식별하기 위해 사용하는 속성들의 부분 집합**으로, 기본키로 사용할 수 있는 속성들을 의미합니다.

### 만족해야 하는 2가지 조건

#### 유일성 (Uniqueness)
- Key로 하나의 Tuple을 유일하게 식별할 수 있어야 함
- 동일한 Key 값을 가진 레코드가 존재하면 안 됨

#### 최소성 (Minimality)
- 꼭 필요한 속성으로만 구성되어야 함
- 속성을 하나라도 제거하면 유일성을 만족하지 못함

### 예시
학생 테이블에서 `학번`, `주민번호`, `(학과코드 + 학년 + 반)`이 각각 후보키가 될 수 있습니다.

---

## 2. Primary Key (기본키)

### 정의
**후보키 중 선택한 Main Key**로, 테이블에서 각 레코드를 고유하게 식별하는 주요 키입니다.

### 특징

#### Null 값을 가질 수 없음
```sql
-- 잘못된 예시
INSERT INTO students (student_id, name) VALUES (NULL, '김철수');
```

#### 동일한 값이 중복될 수 없음
```sql
-- 잘못된 예시 (이미 존재하는 student_id)
INSERT INTO students (student_id, name) VALUES (12345, '이영희');
INSERT INTO students (student_id, name) VALUES (12345, '박민수'); -- ERROR!
```

### 선택 기준
- **안정성**: 값이 자주 변경되지 않는 속성
- **단순성**: 가능한 한 단순한 속성
- **의미성**: 비즈니스적으로 의미가 있는 속성

---

## 3. Alternate Key (대체키)

### 정의
**후보키 중 기본키를 제외한 나머지 키** = 보조키

### 특징
- 기본키와 같은 유일성과 최소성을 만족
- 기본키가 손상되었을 때 대안으로 사용 가능
- 인덱스 생성 시 성능 향상에 활용

### 예시
학생 테이블에서 `학번`이 기본키라면, `주민번호`는 대체키가 됩니다.

---

## 4. Super Key (슈퍼키)

### 정의
**유일성은 만족하지만, 최소성은 만족하지 못하는 키**

### 특징
- 불필요한 속성이 포함된 키
- 후보키의 상위 집합
- 데이터 중복을 방지하지만 효율성이 떨어짐

### 예시
학생 테이블에서 `(학번 + 이름 + 학과)`는 슈퍼키입니다.
- 유일성: 학생을 고유하게 식별 가능
- 최소성: `학번`만으로도 식별 가능하므로 `이름`, `학과`는 불필요

---

## 5. Foreign Key (외래키)

### 정의
**다른 릴레이션의 기본키를 그대로 참조하는 속성의 집합**

### 역할
- 테이블 간의 관계를 설정
- 참조 무결성 유지
- 데이터 일관성 보장

### 특징
#### 참조 무결성 (Referential Integrity)
```sql
-- 학생 테이블
CREATE TABLE students (
    student_id INT PRIMARY KEY,
    name VARCHAR(50),
    department_id INT,
    FOREIGN KEY (department_id) REFERENCES departments(dept_id)
);

-- 잘못된 예시 (존재하지 않는 department_id 참조)
INSERT INTO students VALUES (1, '김철수', 999); -- ERROR!
```

### 예시
- 주문 테이블의 `고객번호`는 고객 테이블의 `고객번호`(기본키)를 참조하는 외래키
- 수강신청 테이블의 `학번`은 학생 테이블의 `학번`(기본키)를 참조하는 외래키

---

## Key 종류별 관계도

```
슈퍼키 (Super Key)
    ↓ (최소성 추가)
후보키 (Candidate Key)
    ↓ (하나 선택)
기본키 (Primary Key) | 대체키 (Alternate Key)
```
