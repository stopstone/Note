# 대칭키와 공개키

> 암호화 기술에서 중요한 것은 **데이터의 기밀성(Confidentiality)** 을 보장하는 것입니다.    
> 대칭키와 공개키는 현대 암호화 시스템의 두 가지 주요 방식으로, 각각의 장단점이 있어 상황에 맞게 선택하거나 혼합하여 사용합니다.  

## 1. 대칭키(Symmetric Key)란?

**대칭키 암호화**는 암호화와 복호화에 **동일한 키**를 사용하는 방식입니다.  
송신자와 수신자가 같은 비밀키를 공유하여 데이터를 암호화하고 복호화합니다.

### 주요 특징

* **빠른 처리 속도**: 단일 키로 암호화/복호화하므로 연산이 간단하고 빠름
* **적은 컴퓨팅 리소스**: 복잡한 수학적 연산이 필요하지 않음
* **키 관리의 어려움**: 송수신자 간에 동일한 키를 안전하게 공유해야 함
* **확장성 문제**: 참여자가 늘어날수록 키 관리가 복잡해짐

### 대칭키 암호화 과정

```
송신자: 평문 + 대칭키 → 암호문
수신자: 암호문 + 대칭키 → 평문
```

### 대칭키 알고리즘 예시

* **AES(Advanced Encryption Standard)**: 가장 널리 사용되는 대칭키 알고리즘
* **DES(Data Encryption Standard)**: 구형 알고리즘으로 현재는 권장되지 않음
* **3DES(Triple DES)**: DES를 3번 적용한 방식

## 2. 공개키(Public Key)/비대칭키(Asymmetric Key)란?

**공개키 암호화**는 암호화와 복호화에 **서로 다른 키**를 사용하는 방식입니다.  
공개키는 누구나 알 수 있지만, 개인키(비밀키)는 소유자만 가지고 있어야 합니다.

### 주요 특징

* **키 분배 문제 해결**: 공개키는 자유롭게 공유 가능
* **높은 보안성**: 개인키는 소유자만 가지고 있어 안전
* **느린 처리 속도**: 복잡한 수학적 연산으로 인해 대칭키보다 느림
* **큰 키 크기**: 보안을 위해 큰 키 크기가 필요함

### 공개키 암호화 과정

```
송신자: 평문 + 수신자의 공개키 → 암호문
수신자: 암호문 + 자신의 개인키 → 평문
```

### 공개키 알고리즘 예시

* **RSA**: 가장 널리 사용되는 공개키 알고리즘
* **ECC(Elliptic Curve Cryptography)**: RSA보다 작은 키로 동일한 보안 제공
* **DSA(Digital Signature Algorithm)**: 전자서명에 특화된 알고리즘

## 3. 대칭키 vs 공개키 비교

| 항목 | 대칭키 | 공개키 |
|:---|:---|:---|
| 키 개수 | 1개 (동일한 키) | 2개 (공개키 + 개인키) |
| 처리 속도 | 빠름 | 느림 |
| 키 관리 | 복잡 (안전한 키 분배 필요) | 간단 (공개키만 공유) |
| 보안성 | 키 노출 시 위험 | 개인키만 안전하면 됨 |
| 확장성 | 낮음 (참여자 증가 시 복잡) | 높음 (공개키 자유 공유) |
| 용도 | 대용량 데이터 암호화 | 키 교환, 전자서명 |

## 4. 공개키 암호화 방식의 한계

공개키 암호화는 **기밀성(Confidentiality)**만 보장할 뿐, 다음 요소들은 보장하지 못합니다:

* **무결성(Integrity)**: 데이터가 전송 중에 변조되지 않았는지 확인 불가
* **인증(Authenticity)**: 송신자가 정말 해당 사람인지 확인 불가
* **부인 방지(Non-repudiation)**: 송신자가 메시지를 보냈다는 것을 부인할 수 있음

### 해결 방법

**MAC(Message Authentication Code)**
* 대칭키 기반의 무결성 검증 방식
* 공식: `T = MAC(K, M)` (K: 대칭키, M: 메시지)
* 송신자와 수신자가 동일한 키를 공유해야 함

**전자서명(Digital Signature)**
* 공개키 기반의 무결성 및 인증 방식
* 개인키로 서명하고 공개키로 검증
* 부인 방지 기능도 제공

## 5. 하이브리드 방식 (SSL/TLS)

대칭키와 공개키의 장점을 결합한 방식으로, **SSL/TLS 프로토콜**의 기반이 됩니다.

### 하이브리드 방식 진행 과정

1. **키 교환 단계**: 공개키 암호화를 사용하여 대칭키를 안전하게 교환
   * A가 B의 공개키로 세션키(대칭키)를 암호화하여 B에게 전송
   * B는 자신의 개인키로 세션키를 복호화

2. **데이터 통신 단계**: 교환된 대칭키로 실제 데이터를 암호화하여 통신
   * 이후 모든 데이터는 빠른 대칭키 암호화로 처리
   * 세션이 종료되면 세션키도 폐기

### 하이브리드 방식의 장점

* **보안성**: 공개키 암호화의 안전한 키 교환
* **성능**: 대칭키 암호화의 빠른 처리 속도
* **확장성**: 공개키 암호화의 쉬운 키 관리

## 6. 실제 사용 예시

### HTTPS 통신 과정

1. **핸드셰이크**: 클라이언트와 서버가 SSL/TLS 버전과 암호화 방식 협상
2. **인증서 검증**: 클라이언트가 서버의 공개키 인증서를 검증
3. **세션키 교환**: 서버의 공개키로 세션키를 암호화하여 전송
4. **데이터 통신**: 세션키로 모든 데이터를 암호화하여 통신

### 안드로이드 개발에서의 활용

```kotlin
// OkHttp에서 SSL/TLS 설정 예시
val client = OkHttpClient.Builder()
    .sslSocketFactory(sslContext.socketFactory, trustManager)
    .build()
```

## 7. 키 관리의 중요성

### 대칭키 관리

* **안전한 키 분배**: 키를 안전하게 전달하는 방법 필요
* **키 갱신**: 정기적인 키 교체로 보안 강화
* **키 백업**: 키 손실 시 복구 방안 마련

### 공개키 관리

* **인증서 관리**: 공개키의 신뢰성을 보장하는 인증서 체계
* **개인키 보호**: 개인키는 절대 공유하지 않고 안전하게 보관
* **키 갱신**: 정기적인 키 쌍 교체
