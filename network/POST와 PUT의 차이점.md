# POST와 PUT의 차이점

> POST와 PUT은 모두 **서버의 상태를 변경하는 HTTP 메서드**입니다.  
> 하지만 두 메서드가 언제 사용되는지, 어떤 의미를 가지는지 헷갈리는 경우가 많습니다.  
> 이번 글에서는 POST와 PUT의 차이점을 명확히 정리하여 언제 어떤 메서드를 사용해야 하는지 알아보겠습니다.

## 1. POST 메서드

### 1.1 POST 메서드란?

`POST`는 **서버에 새로운 리소스를 생성하거나 데이터를 제출하는 메서드**입니다.   
서버의 상태를 변경하는 가장 일반적인 방법입니다.  

### 1.2 POST 메서드의 핵심 특징

#### **멱등성이 없음 (Non-idempotent)**
* **정의**: 같은 요청을 여러 번 보내면 **매번 다른 결과**가 발생할 수 있음
* **예시**: 
  - 사용자 가입: 같은 이메일로 여러 번 요청하면 에러 발생
  - 주문 생성: 같은 요청을 여러 번 보내면 중복 주문 생성
  - 로그인: 여러 번 요청해도 토큰은 한 번만 발급

#### **리소스 생성에 특화**
* **새로운 ID 생성**: 서버가 자동으로 리소스 ID 할당
* **위치 불명확**: 생성된 리소스의 정확한 위치를 미리 알 수 없음
* **상태 의존적**: 서버의 현재 상태에 따라 결과가 달라짐

#### **데이터 전송 방식**
* **HTTP Body**: 요청 본문에 데이터 포함
* **길이 제한 없음**: 데이터 양에 제한이 거의 없음
* **복잡한 데이터**: JSON, XML, 파일 등 다양한 형태 지원

### 1.3 POST 메서드 활용 상황

#### **리소스 생성**
* **사용자 관리**: 회원가입, 계정 생성
* **콘텐츠 관리**: 게시글 작성, 댓글 작성, 파일 업로드
* **비즈니스 로직**: 주문 생성, 결제 처리, 예약 생성

#### **데이터 제출**
* **폼 데이터**: 설문조사, 문의하기, 신청서
* **검색 요청**: 복잡한 검색 조건, 필터링
* **인증**: 로그인, 토큰 갱신

#### **비동기 작업**
* **배치 처리**: 대량 데이터 처리 요청
* **작업 큐**: 백그라운드 작업 요청
* **웹훅**: 이벤트 알림 전송

## 2. PUT 메서드

### 2.1 PUT 메서드란?

`PUT`은 **서버의 리소스를 전체적으로 교체하거나 생성하는 메서드**입니다. 리소스의 **완전한 상태**를 표현합니다.

### 2.2 PUT 메서드의 핵심 특징

#### **멱등성 보장 (Idempotent)**
* **정의**: 같은 요청을 여러 번 보내도 **항상 동일한 결과** 보장
* **예시**:
  - 사용자 프로필 수정: 같은 데이터로 여러 번 요청해도 최종 상태 동일
  - 설정 변경: 여러 번 요청해도 같은 설정으로 유지
  - 파일 업로드: 같은 파일을 여러 번 업로드해도 덮어쓰기

#### **리소스 식별자 명시**
* **명확한 위치**: URI로 리소스의 정확한 위치 지정
* **ID 기반**: 클라이언트가 리소스 ID를 알고 있어야 함
* **전체 교체**: 리소스의 모든 속성을 한 번에 교체

#### **생성 또는 교체**
* **리소스 존재 시**: 전체 내용을 교체
* **리소스 없을 시**: 새로운 리소스 생성
* **상태 무관**: 서버의 현재 상태와 무관하게 동작

### 2.3 PUT 메서드 활용 상황

#### **리소스 전체 교체**
* **사용자 관리**: 프로필 전체 수정, 설정 전체 변경
* **콘텐츠 관리**: 게시글 전체 수정, 문서 전체 교체
* **시스템 설정**: 애플리케이션 설정, 환경 변수 설정

#### **리소스 생성 (명시적 ID)**
* **사용자 지정 ID**: 특정 ID로 리소스 생성
* **데이터 동기화**: 클라이언트와 서버 간 데이터 동기화
* **백업 복원**: 특정 상태로 시스템 복원

#### **배치 업데이트**
* **전체 교체**: 여러 필드를 한 번에 업데이트
* **상태 초기화**: 리소스를 기본 상태로 되돌리기
* **템플릿 적용**: 미리 정의된 템플릿으로 전체 교체

## 3. POST vs PUT 핵심 차이점

### 3.1 멱등성 (Idempotency)

| 구분 | POST | PUT |
|------|------|-----|
| **멱등성** | Non-idempotent | Idempotent |
| **중복 요청** | 매번 다른 결과 가능 | 항상 동일한 결과 |
| **안전성** | 중복 방지 로직 필요 | 자동으로 안전함 |
| **재시도** | 위험할 수 있음 | 안전하게 재시도 가능 |

### 3.2 리소스 처리 방식

| 구분 | POST | PUT |
|------|------|-----|
| **리소스 ID** | 서버가 생성 | 클라이언트가 지정 |
| **리소스 위치** | 서버가 결정 | 클라이언트가 명시 |
| **처리 방식** | 상태 의존적 | 상태 무관적 |
| **결과 예측** | 어려움 | 명확함 |

### 3.3 데이터 전송

| 구분 | POST | PUT |
|------|------|-----|
| **데이터 범위** | 부분 데이터 가능 | 전체 데이터 필요 |
| **기존 데이터** | 보존 가능 | 완전히 교체 |
| **검증 방식** | 서버 로직에 의존 | 데이터 자체로 검증 |
| **에러 처리** | 복잡할 수 있음 | 상대적으로 단순 |

## 4. 실무에서의 선택 기준

### 4.1 POST를 선택해야 하는 경우

#### **새로운 리소스 생성**
```
POST /users          # 새 사용자 생성
POST /articles       # 새 게시글 작성
POST /orders         # 새 주문 생성
```

#### **서버가 ID를 관리하는 경우**
```
POST /api/notifications  # 알림 생성 (서버가 ID 할당)
POST /api/logs          # 로그 생성 (자동 ID)
POST /api/events        # 이벤트 생성 (타임스탬프 기반)
```

#### **상태가 중요한 작업**
```
POST /api/login        # 로그인 (세션 상태 변경)
POST /api/payment      # 결제 (계좌 상태 변경)
POST /api/reservation  # 예약 (가용성 상태 변경)
```

### 4.2 PUT을 선택해야 하는 경우

#### **리소스 전체 교체**
```
PUT /users/123        # 사용자 123의 전체 정보 교체
PUT /articles/456     # 게시글 456의 전체 내용 교체
PUT /settings         # 설정 전체 교체
```

#### **클라이언트가 ID를 아는 경우**
```
PUT /users/me         # 현재 사용자 정보 전체 교체
PUT /profiles/123     # 프로필 123 전체 교체
PUT /configs/main     # 메인 설정 전체 교체
```

#### **멱등성이 중요한 경우**
```
PUT /api/sync         # 데이터 동기화 (재시도 안전)
PUT /api/backup       # 백업 복원 (여러 번 실행해도 동일)
PUT /api/state        # 상태 저장 (중복 방지)
```

### 4.3 선택이 애매한 경우

#### **사용자 프로필 수정**
```
# 부분 수정이 주된 경우
PATCH /users/123      # 일부 필드만 수정

# 전체 교체가 주된 경우  
PUT /users/123        # 프로필 전체 교체

# 새로운 프로필 생성
POST /users           # 새 사용자 생성
```

## 5. 주의사항과 모범 사례

### 5.1 POST 사용 시 주의사항

#### **중복 방지**
* **클라이언트 측**: 중복 제출 방지 UI 구현
* **서버 측**: 중복 요청 검증 로직 구현
* **토큰 기반**: CSRF 토큰으로 중복 방지

#### **에러 처리**
* **상세한 에러 메시지**: 왜 실패했는지 명확히
* **재시도 가이드**: 사용자에게 적절한 안내
* **상태 복구**: 실패 시 이전 상태로 복구

### 5.2 PUT 사용 시 주의사항

#### **데이터 완성성**
* **필수 필드 검증**: 모든 필요한 데이터 포함
* **기본값 처리**: 누락된 필드에 대한 기본값 설정
* **데이터 무결성**: 비즈니스 규칙 검증

#### **권한 확인**
* **리소스 소유권**: 해당 리소스 수정 권한 확인
* **동시성 제어**: 동시 수정 시 충돌 방지
* **감사 로그**: 수정 이력 추적

### 5.3 일반적인 사례

#### **HTTP 상태 코드**
```
POST 성공: 201 Created
PUT 성공: 200 OK 또는 204 No Content
POST/PUT 실패: 400 Bad Request, 401 Unauthorized, 403 Forbidden
```

#### **응답 형식**
```
POST 응답: 생성된 리소스 정보 + Location 헤더
PUT 응답: 수정된 리소스 정보 또는 204 No Content
```

#### **에러 응답**
```
{
  "error": "Validation failed",
  "message": "필수 필드가 누락되었습니다",
  "details": ["email", "password"]
}
```
